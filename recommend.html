<HTML >
    <HEAD>
        <title>Skills pointer - recommend a colleague!</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </HEAD> 
    <body>
        <p>Qui pourrait m'aider sur...</p>
        <input id="skillInput" type="text" placeholder="ex : Angular">
        <button onclick="searchSkills()">OK</button>


        <div id="result">
            <ul id="result_list">

            </ul>        
        </div>

        <hr>
        <div id="welcome"></div>

        <p>Mon collègue</p>
        <input id="name" type="text" placeholder="ex: Marie">
        m'a aidé avec
        <input id="skill" type="text" placeholder="compétence">
        <button onclick="recommend()">recommander</button>

        <div id="result">
        </div>

        <script>
            
            var persons = [
                {
                    "id":1,
                    "name": "John Doe",
                    "location": "Meylan"
                },
                {
                    "id":2,
                    "name": "John Doe",
                    "location": "Meylan"
                },
                {
                    "id":3,
                    "name": "Bastien David",
                    "location": "Meylan"
                },
                {
                    "id":4,
                    "name": "Brice de Nice",
                    "location": "Sofia Antipolis"
                }
            ];

            var recommendations = [
                {recommender:4, recommendee: 1, skill: "angular"},
                {recommender:4, recommendee: 1, skill: "C#"},
            ];

            var user=persons[3];
            $('#welcome').text('Welcome '+user.name+'!');

            function recommend() {
                var name=document.getElementById("name").value
                var skill=document.getElementById("skill").value

                var person=persons.filter(p=>p.name==name);
                var recommendee;
                if(person.length==0) {
                    var personId = persons.length+1;
                    recommendee={
                        "id":personId,
                        "name":name,
                        "location":"Meylan"
                    };
                    persons.push(recommendee);
                } else {
                    recommendee=person[0];
                }

                recommendation = {recommender:user.id,recommendee:recommendee.id,skill:skill};
                recommendations.push(recommendation);
                
                console.log(persons,recommendations);
            }

            function searchSkills() {
                console.log(db)
            }

        </script>
    </body>
</HTML>